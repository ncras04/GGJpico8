pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
--main & character

function _init()
isrunning=true
posx=64
posy=64
anim=2
spd=1
sprtoffset=0
flipped=false
walking=false

init_letters()

add_letter("d")
add_letter("u")
add_letter("a")
add_letter("l")
add_letter("i")
add_letter("t")
add_letter("y")

end

function _update()

if(isrunning) then
--animationloop + sound
if btn(0) or btn(1) or btn(2) or btn(3) then
anim+=0.25*spd
if anim==4 then sfx(0,0,0,0) end
if anim>6 then 
sfx(0,0,0,0)
anim=2 end
end



--speed, spriteoffset and flip
if btn(0) then posx-=0.2*spd sprtoffset=0 flipped=true end
if btn(1) then posx+=0.2*spd sprtoffset=0 flipped=false end
if btn(2) then posy-=0.2*spd sprtoffset=32 end
if btn(3) then posy+=0.2*spd sprtoffset=16 end

--set bounds
if posx<-4 then posx=-4 end
if posx>123 then posx=123 end
if posy<-4 then posy=-4 end
if posy>123 then posy=123 end

--set sprint
if btn(4) then spd=2
else spd=1 end 

--set letters
for l in all(letterbox) do
l:update()
end

if(#letterbox==0)
then isrunning=false 
sfx(3,2,0,0)
end
end

end

function _draw()
cls()

if(isrunning) then
spr(anim+sprtoffset,posx,posy,1,1,flipped)

--draw letters
for l in all(letterbox) do
l:draw()
end
end

if(isrunning==false) then
print_centered("you win!")
end
end

-->8
--letters & helpers

function init_letters()
letterbox={}

end

function add_letter(_letter)
add(letterbox,{
x=10+rnd(110),
y=10+rnd(110),
letter = _letter,
draw=function(self)
circfill(self.x+1,self.y+2,3,13)
print(self.letter,self.x,self.y,2) end,
update=function(self)
if hit(posx,posy,self.x,self.y,self.x+3,self.y+3)
then 
sfx(1,1,0,0)
del(letterbox,self)
end
end})
end

--hitdetection
function hit(x,y,rx,ry,rw,rh)
if((x+2)>rx and (x+2)<rx+rw) and 
		((y+2)>ry and (y+2)<ry+rh)
	then	return true
		end
		return false
		end
		
--print centered
function print_centered(str)
  print(str, 64 - (#str * 2), 60) 
end
__gfx__
00000000000000000000000000000000000500000005000000050000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000780000007800000078000005780000057800000578000000780000007800000000000000000000000000000000000000000000000000000000000
00700700067777600677776006777760067777600677776006777760067777600677776000000000000000000000000000000000000000000000000000000000
00077000067777600677776006777760067777600677776006777760067777600677776000000000000000000000000000000000000000000000000000000000
00077000007777000077770000777700007777000077770000777700007777000077770000000000000000000000000000000000000000000000000000000000
00700700006776000067760000677600006776000067760000677600006776000067760000000000000000000000000000000000000000000000000000000000
00000000006006000060060000600700006006000070060000600600006006000060060000000000000000000000000000000000000000000000000000000000
00000000007007000060070000600000007007000000060000700700006006000060060000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000550000005500000055000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000880000008800000088000005885000058850000588500000880000008800000000000000000000000000000000000000000000000000000000000
00000000067777600677776006777760067777600677776006777760067777600677776000000000000000000000000000000000000000000000000000000000
00000000067777600677776006777760067777600677776006777760067777600677776000000000000000000000000000000000000000000000000000000000
00000000007777000077770000777700007777000077770000777700007777000077770000000000000000000000000000000000000000000000000000000000
00000000006776000067760000677600006776000067760000677600006776000067760000000000000000000000000000000000000000000000000000000000
00000000006006000060060000600700006006000070060000600600006006000060060000000000000000000000000000000000000000000000000000000000
00000000007007000060070000600000007007000000060000700700006006000060060000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000550000005500000055000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000770000007700000077000005775000057750000577500000770000007700000000000000000000000000000000000000000000000000000000000
00000000067777600677776006777760067777600677776006777760067777600677776000000000000000000000000000000000000000000000000000000000
00000000067777600677776006777760067777600677776006777760067777600677776000000000000000000000000000000000000000000000000000000000
00000000007777000077770000777700007777000077770000777700007777000077770000000000000000000000000000000000000000000000000000000000
00000000006776000067760000677600006776000067760000677600006776000067760000000000000000000000000000000000000000000000000000000000
00000000006006000060060000600700006006000070060000600600006006000060060000000000000000000000000000000000000000000000000000000000
00000000007007000060070000600000007007000000060000700700006006000060060000000000000000000000000000000000000000000000000000000000
__sfx__
00010000197501c750207502375028750287502575017750127500275001750007500575002750007500070000700007000070000700007000070000700007000070000700007000070000700007000070000700
000200000675008750097500c7500f7501375015750187501b7501e7502275024750297502e750347503e7503f7501e7500c75004750027500175000750007500075001750007500000000000000000000000000
000500001c2501c2501c2501c2501c2501d2501c2501c2501c2501a4501a4502c350273502f3502f3502f3502f3502f3502e3502e3502e3502d3502d3501645021450224502245025450274502e4503045015450
00070000123501235012350123501235012350133501235020350203502035020350203502035020350203502035020350000000e3500e350000001a3501a3501a3501a3501a3502135022350243502635035350
